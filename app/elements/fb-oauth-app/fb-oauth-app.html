<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../routes.html">
<link rel="import" href="../../bower_components/firebase-element/firebase-element.html">
<link rel="import" href="../../bower_components/firebase-element/firebase-login.html">
<link rel="import" href="../../bower_components/core-drawer-panel/core-drawer-panel.html">
<link rel="import" href="../../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../../bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="../../bower_components/core-pages/core-pages.html">
<link rel="import" href="../../bower_components/core-icons/core-icons.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/core-menu/core-menu.html">
<link rel="import" href="../../bower_components/core-item/core-item.html">
<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../fire-login/fire-login.html">

<polymer-element name="fb-oauth-app" attributes="">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <firebase-element id="firebaseElement"
      location="https://fbase-oauth-examp.firebaseio.com/test"
      data="{{data}}"
      keys="{{keys}}"
      on-data-ready="{{dataReady}}"
      on-data-change="{{dataChange}}"
      on-error="{{fbElementError}}">
    </firebase-element>
    <!-- <template repeat="{{key in keys}}">
      <p>{{key}}: {{data[key]}}</p>
    </template> -->
    <core-drawer-panel>
      <core-header-panel drawer>
        <core-toolbar>
          Menu
        </core-toolbar>
        <more-route-selector>
          <core-menu selected="{{page}}" valueAttr="route">
            <core-item route="home" label="home">
              <a href="{{urlFor('home')}}"></a>
            </core-item>
            <core-item route="login" label="login">
              <a href="{{urlFor('login')}}"></a>
            </core-item>
            <core-item route="events" label="events">
              <a href="{{urlFor('events')}}"></a>
            </core-item>
          </core-menu>
        </more-route-selector>
      </core-header-panel>
      <core-header-panel main>
        <core-toolbar>
          <div flex class="">
            firebase oauth example
          </div>
          <paper-button id="logoutBtn" on-click="{{logout}}"> logout</paper-button>

        </core-toolbar>
        <!-- MAIN CONTENT -->
        <div class="container" layout vertical>
          <more-route-selector>
            <core-pages selected="{{page}}" valueAttr="route">
              <section route="home">
                  home
              </section>
              <section route="login">
                  <fire-login id="fireLogin"
                    dbLocation="https://fbase-oauth-examp.firebaseio.com/"
                    user="{{user}}"></fire-login>
              </section>
              <section route="events">
                events
              </section>
            </core-pages>
          </more-route-selector>
        </div>
      </core-header-panel>
    </core-drawer-panel>
  </template>
  <script>
    (function () {
      Polymer({
        // define element prototype here
        logout: function(){
          console.log("logging out");
          this.$.fireLogin.logout();
        },
        dataReady: function(event){
          console.log(event);
          console.log(this.$.firebaseElement.data);
        },
        dataChange: function(event){
          console.log(event);
        },
        fbElementError: function(event){
          console.log(event);

        }
      });
    })();
  </script>
</polymer-element>
