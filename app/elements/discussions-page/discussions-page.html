<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">

<polymer-element name="discussions-page" attributes="user" layout vertical>
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    discussions page
    <div id="newDiscussionForm"
      layout vertical>

      <paper-input id="newDiscussionTopicInput"
         on-change="{{addDiscussion}}"
         value="{{newDiscussionTopic}}"
         floatingLabel
         label="topic"></paper-input>
      <paper-input id="newDiscussionBodyInput"
         on-change="{{addDiscussion}}"
         value="{{newDiscussionBody}}"
         floatingLabel
         label="Add a new discussion"></paper-input>
    </div>
  </template>
  <script>
    (function () {
      Polymer({
        // define element prototype here
        discussions:[],
        ready: function(){
          this.$.newDiscussionForm.style.display = "none";
        },
        showNewDiscussionForm: function(){
          this.$.newDiscussionForm.style.display = "block";
        },
        addDiscussion: function() {
          if (this.newDiscussionTopic && this.newDiscussionBody) {
            this.discussions.unshift({
              topic: this.newDiscussionTopic,
              body: this.newDiscussionBody,
              done: false
            });
            this.$.newDiscussionForm.style.display = 'none';
            this.$.newDiscussionTopicInput.value = null;
            this.$.newDiscussionBodyInput.value = null;
          }
        },
        discussionsChanged:function(){
          console.log(this.discussions);
        }
      });
    })();
  </script>
</polymer-element>
